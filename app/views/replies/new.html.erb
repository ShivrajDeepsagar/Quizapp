<body>
  <div class="timer"><h2><center>Quiz ends in <span id="time">01:00</span> minutes!</center></h2></div>
</body>
<h1>
  <%= @quiz.title %>
</h1>


<%= form_for [ @quiz, @reply ] do |f| %>
  <%= f.fields_for :answers do |c| %>
    <%= render c.object.question.kind, c: c %>
  <% end %>
  <%= f.submit "Finish quiz", class: "btn btn-primary" %>
<% end %>

<!-- <script>
  setTimeout(function(){
    document.getElementById("new_reply").submit();
  }, 1000 * 60 * 1);
</script> -->
<script>
function startTimer(duration, display) {
    var timer = duration, minutes, seconds;
    setInterval(function () {
        minutes = parseInt(timer / 60, 10)
        seconds = parseInt(timer % 60, 10);

        minutes = minutes < 10 ? "0" + minutes : minutes;
        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (--timer < 0) {
            timer = duration;
        }
    }, 1000);
}

window.onload = function () {
    var fiveMinutes = 60 * 1,
        display = document.querySelector('#time');
    startTimer(fiveMinutes, display);
};
setTimeout(function(){
  document.getElementById("new_reply").submit();
}, 1000 * 60 * 1);
if(!window.location.hash) {
       window.location = window.location + '#loaded';
       window.location.reload();
     }
</script>
